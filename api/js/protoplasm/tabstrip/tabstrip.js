if(window.Control==undefined){Control={}}Control.TabStrip=Class.create();Control.TabStrip.prototype={initialize:function(a,b){this.container=$(a);if(ts=this.container.retrieve("tabstrip")){ts.destroy()}Element.cleanWhitespace(this.container);this.options=Object.extend({activeClass:"active",inactiveClass:null,hoverClass:"hover",disabledClass:"disabled",onactivate:Prototype.emptyFunction,ondeactivate:Prototype.emptyFunction,disabled:false},b||{});this.tabs=new Array();this.createTabs(this.container,this.options);if(this.options.activeTab){this.switchTab(this.options.activeTab)}else{this.switchTabByIndex(0)}this.container.store("tabstrip",this);this.destructor=Event.on(window,"unload",this.destroy.bind(this))},createTabs:function(a){if(a.childNodes.length==2){var d=a.childNodes[0];Element.cleanWhitespace(d);var b=a.childNodes[1];Element.cleanWhitespace(b);if(d.childNodes.length==b.childNodes.length){for(var c=0;c<d.childNodes.length;++c){var e=new Control.TabStrip.Tab(this,d.childNodes[c],b.childNodes[c],this.options);if(this.options.disabled&&this.options.disabled.include(e.id)){e.disable()}this.tabs[this.tabs.length]=e}}}},destroy:function(){this.switchTabByIndex(0);for(var a=0;a<this.tabs.length;a++){this.tabs[a].destroy()}this.container.store("tabstrip",null);this.destructor.stop()},_switchTab:function(b){for(var a=0;a<this.tabs.length;++a){if(this.tabs[a]==b){return this.switchTabByIndex(a)}}},switchTab:function(a){for(var b=0;b<this.tabs.length;++b){if(this.tabs[b].id==a){return this.switchTabByIndex(b)}}},switchTabByIndex:function(a){if(!this.tabs[a].disabled){for(var b=0;b<this.tabs.length;++b){if(b==a){if(!this.tabs[b].active){this.tabs[b].activate()}}else{if(this.tabs[b].active){this.tabs[b].deactivate()}}}}},disableTab:function(a){for(var b=0;b<this.tabs.length;++b){if(this.tabs[b].id==a){this.tabs[b].disable()}}},enableTab:function(a){for(var b=0;b<this.tabs.length;++b){if(this.tabs[b].id==a){this.tabs[b].enable()}}}};Control.TabStrip.Tab=Class.create();Control.TabStrip.Tab.prototype={initialize:function(d,b,c,a){this.id=b.id;this.control=d;this.tabDiv=b;this.panel=new Control.TabStrip.Panel(c,this);this.options=a;this.active=false;this.disabled=false;this.listeners=[b.on("mouseover",this.hover.bindAsEventListener(this)),b.on("mouseout",this.restore.bindAsEventListener(this)),b.on("click",function(f){if(!this.active){this.control._switchTab(this)}}.bindAsEventListener(this)),b.on("mousedown",function(f){return false}.bindAsEventListener(this)),b.on("selectstart",function(f){return false}.bindAsEventListener(this))]},destroy:function(){for(var a=0;a<this.listeners.length;a++){this.listeners[a].stop()}},applyTabBehavior:function(a){},hover:function(a){if(!this.active&&!this.disabled){Element.addClassName(this.tabDiv,this.options.hoverClass)}},restore:function(a){Element.removeClassName(this.tabDiv,this.options.hoverClass)},activate:function(a){if(!this.disabled){this.restore();Element.removeClassName(this.tabDiv,this.options.inactiveClass);Element.addClassName(this.tabDiv,this.options.activeClass);this.panel.show();this.active=true;if(this.options.onactivate){this.options.onactivate(this)}}},deactivate:function(a){this.panel.hide();Element.removeClassName(this.tabDiv,this.options.activeClass);Element.addClassName(this.tabDiv,this.options.inactiveClass);this.active=false;if(this.options.ondeactivate){this.options.ondeactivate(this)}},enable:function(){Element.removeClassName(this.tabDiv,this.options.disabledClass);this.disabled=false},disable:function(){Element.addClassName(this.tabDiv,this.options.disabledClass);this.disabled=true}};Control.TabStrip.Panel=Class.create();Control.TabStrip.Panel.prototype={initialize:function(b,a){this.panelDiv=b;this.tab=a;this.applyPanelBehavior(b);this.hide()},applyPanelBehavior:function(a){},show:function(){Element.show(this.panelDiv)},hide:function(){Element.hide(this.panelDiv)}};if(typeof Protoplasm!="undefined"){Protoplasm.register("tabstrip",Control.TabStrip)};